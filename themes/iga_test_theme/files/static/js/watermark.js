(function(){var c=function(a,b,d){this._document=a;this._eventBus=b;this._configuration=d;this._element=null;this._originalSize={};this.log("Watermark::Created")};c.LOGGING=!1;c.prototype.log=function(a){c.LOGGING&&console.log(a)};c.prototype._addEventListeners=function(){this.log("Watermark::Adding Listeners");this._eventBus.subscribe("Player.build",this._onPlayerBuild,this);this._eventBus.subscribe("uStudioUI.resize",this._onResize,this)};c.prototype._onPlayerBuild=function(a){this.log("Watermark::Building Element");
a=this._document.getElementById(a).parentNode;var b=this._document.createElement("div"),d=this._document.createElement("img");b.setAttribute("id","watermarkContainer");b.setAttribute("data-player-states","idle");b.setAttribute("data-player-state-transition","fade");$(b).hide();d.setAttribute("id","watermarkImage");d.setAttribute("src",this._configuration.watermark_url);this._element=d;b.appendChild(d);a.appendChild(b);this._originalSize={width:$(d).width(),height:$(d).height()};this._onResize({width:$(a).width(),
height:$(a).height()})};c.prototype._onResize=function(a){this.log("Watermark::Resizing Element");a={width:0.1*a.width,height:0.1*a.height};a.width/a.height>this._originalSize.width/this._originalSize.height?$(this._element).css({width:"auto",height:a.height}):$(this._element).css({width:a.width,height:"auto"})};c.prototype._validateConfiguration=function(){return!("watermark_url"in this._configuration)?(this.log("Watermark::Configuration Validation Failed: No watermark url."),!1):!0};window.uStudio=
window.uStudio||{};window.uStudio.Watermark=c;uStudio.uStudioCore.instance.registerModule({name:"uStudioWatermark",initialize:function(a,b,d,c){a=new uStudio.Watermark(document,b,a);a.log("Watermark::Registered");a._validateConfiguration()?a._addEventListeners():a.log("Watermark::Not Listening.");c()}})})();
