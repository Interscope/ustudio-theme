(function(){var d={};window.console=window.console?window.console:{log:function(){},warn:function(){}};var g=function(){uStudio.Player.LOGGING&&window.console.log.apply(window.console,arguments)},j=function(){window.console.warn.apply(window.console,arguments)},c=function(a,b){b=b?b:document.getElementById(a);this._id=a;this._element=b;this._events={};this._register()};c.prototype._register=function(){d[this._id]&&j("WARNING: Replacing existing player "+this._id);d[this._id]=this;this.listen("uStudio.eventsReady",
k)};c.prototype.listen=function(a,b){this._events[a]||(this._events[a]=[]);this._events[a].push(b)};c.prototype.send=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();this._element.contentWindow.postMessage(JSON.stringify({event:b,arguments:a}),"*")};c.prototype.receive=function(a){g("PLAYER "+this._id+": Receiving event "+a.event,a.arguments);if(this._events[a.event])for(var b=0;b<this._events[a.event].length;b++)this._events[a.event][b].apply(this,a.arguments);else g("PLAYER "+
this._id+": No handler for "+a.event)};c.prototype.replace=function(a){var b=a.parentElement,c=a.nextSibling;b.removeChild(a);c?b.insertBefore(this._element,c):b.appendChild(this._element)};c.prototype.matches=function(a){return this._element.contentWindow===a};c.LOGGING=!1;c.create=function(a,b,h,e){if(!e){e=(e=void 0,24);for(var d="",f=0;f<e;f++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012345789"[parseInt(61*Math.random())];e=d}a='<iframe src="'+a+'" width="'+(b?b:640)+'" height="'+
(h?h:360)+'" scrolling="no" id="'+e+'" webkitAllowFullScreen="true" mozallowfullscreen="true" allowFullScreen="true" frameborder="0"></iframe>';b=document.createElement("div");b.innerHTML=a;return new c(e,b.firstChild)};var k=function(){this.send("uStudio.pageReady",{url:location.href,id:"foobar"})},f=function(a){var b=a.source,c;for(c in d)if(d.hasOwnProperty(c)&&d[c].matches(b)){d[c].receive(JSON.parse(a.data));break}};window.attachEvent?window.attachEvent("onmessage",f):window.addEventListener?
window.addEventListener("message",f,!1):document.addEventListener("message",f,!1);window.uStudio=!window.uStudio?{}:window.uStudio;window.uStudio.Player=c})();
